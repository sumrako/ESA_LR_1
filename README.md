# Лабораторная работа 1 (JavaEE)
## Glassfish
В качестве сервера приложений был использован Oracle GlassFish Server.

Команда для запуска сервера glassfish
```bash
asadmin start-domain domain1
```


Команда для остановки сервера glassfish
```bash
asadmin stop-domain domain1
```
 

После запуска сервера по адресу [http://localhost:4848](http://localhost:4848) доступна консоль администратора


# Для развертывания приложения на сервер glassfish была произведена интеграция glassfish с IntelliJ IDEA


После развертывания ui приложения доступен по ссылкам [http://localhost:8080/javaEE-1.0-SNAPSHOT](http://localhost:8080/javaEE-1.0-SNAPSHOT) и

## PostgreSQL
В качестве СУБД была использована PostgreSQL. При установке postgres на локальный компьютер была создана локальная база данных, она и использовалась в работе.

Параматры подключения к базе данных прописаны в файле [persistence.xml](https://github.com/vellarLa/ESA_LAB_1/blob/master/src/main/resources/META-INF/persistence.xml).

Параметер
```bash
<property name="jakarta.persistence.schema-generation.database.action" value="create"/>
```
включает автоматическую генерачию таблиц, если таковые еще не были созданы.

## Data layer
Предметная область - театр. В качестве сущностей взяты:
- visitor - посетитель театра (зритель)
- performance - спектакль
- timetable - расписание (зал, спектакль, время)
- ticket - билет

Схема базы данных:


Для сокрытия деталей реализации хранения сущностей был смоделирован дополнительный слой DTO.
Для работы с базой данный был смоделирован DAO слой.

## Business layer
Логика приложения реализована в Service классах (Stateless Session Beans)
В бизнес-слое реализована логика поиска свободных мест (ряд и место) с учетом выбора сеанса.

## View layer
За обработку запросов отвечают сервлеты, пользовательский интерфейс реализован на jsp страницах.

### Демонстрация работоспособности
Стартовая страница, если пользователь не в системе. На ней посетитель вводит данные (на кого оформить билет) и указывает, имеет ли потенциальный посетитель какие-то льготы
(от этого зависит стоимость билета (310 - обычная цена; 200 - льготная))



Далее пользователю предоставляется выбор спектакля:



После выбора спектакля, пользователь может выбрать время, на которое хочет купить билет



После выбора времени мы видим список свободных мест



После покупки билета, эти места исчезают из списка свободных и отображаются по ссылке "my tickets". Из "my tickets" можно удалить билет, нажав на "delete"



 


